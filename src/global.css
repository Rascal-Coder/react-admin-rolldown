/* import font */
@import "@fontsource-variable/open-sans";
@import "@fontsource-variable/inter";

/* import tailwind */
@import "tailwindcss";
@import "tw-animate-css";

/* config  tailwind */
@config "../tailwind.config.ts";

/* base layer */
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    /* https://tailwindcss.com/docs/upgrade-guide#default-border-color */
    border-color: rgba(
      var(--colors-palette-gray-500Channel) /
      var(--opacity-border)
    );
  }
  * {
    scrollbar-width: thin;
    /* scrollbar-color: var(--border) transparent; */
  }

  body {
    background-color: var(--background);
  }
}

@theme {
  --animate-collapsible-down: collapsible-down 0.2s ease-in-out;
  --animate-collapsible-up: collapsible-up 0.2s ease-in-out;
  --animate-arrow-left: arrow-left 1s ease-in-out infinite;
  --animate-arrow-right: arrow-right 1s ease-in-out infinite;
  --animate-slow-spin: spin 4s linear infinite;
  @keyframes collapsible-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-collapsible-content-height);
    }
  }

  @keyframes collapsible-up {
    from {
      height: var(--radix-collapsible-content-height);
    }
    to {
      height: 0;
    }
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes arrow-left {
    0%,
    100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(-2px);
    }
  }

  @keyframes arrow-right {
    0%,
    100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(2px);
    }
  }
}

/* Shadcn UI Light Theme */
:root {
  --radius: 0.5rem;
  --background: var(--colors-common-white);
  --foreground: var(--colors-common-black);
  --card: var(--colors-common-white);
  --card-foreground: var(--colors-common-black);
  --popover: var(--colors-common-white);
  --popover-foreground: var(--colors-common-black);
  --primary: var(--colors-palette-primary-default);
  --primary-foreground: var(--colors-palette-primary-lighter);
  --secondary: var(--colors-palette-gray-200);
  --secondary-foreground: var(--colors-palette-gray-600);
  --muted: var(--colors-palette-gray-200);
  --muted-foreground: var(--colors-palette-gray-500);
  --accent: var(--colors-palette-gray-300);
  --accent-foreground: var(--colors-palette-gray-600);
  --destructive: var(--colors-palette-error-default);
  --border: rgba(var(--colors-palette-gray-500Channel) / var(--opacity-border));
  --input: rgba(var(--colors-palette-gray-500Channel) / var(--opacity-border));
  --ring: var(--colors-palette-primary-default);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: var(--background);
  --sidebar-foreground: var(--colors-palette-gray-800);
  --sidebar-primary: var(--colors-palette-primary-default);
  --sidebar-primary-foreground: var(--colors-palette-primary-lighter);
  --sidebar-accent: var(--colors-palette-gray-300);
  --sidebar-accent-foreground: var(--colors-palette-gray-800);
  --sidebar-border: var(--colors-palette-gray-300);
  --sidebar-ring: var(--colors-palette-primary-default);

  --layout-tabs: oklch(0.97 0 0);
  --layout-tabs-foreground: oklch(0.4979 0.0094 253.91);
  --layout-tabs-primary: oklch(1 0 0);
  --layout-tabs-primary-foreground: oklch(0.3971 0.0057 258.35);
  --layout-tabs-border: oklch(0.89 0 0);
  --layout-tabs-accent: oklch(0.92 0.0017 247.84);
  --layout-tabs-close-accent: oklch(0.9364 0.0046 258.33);
  --layout-breadcrumb: oklch(0.97 0 0);
  --layout-breadcrumb-accent: oklch(0.92 0.0017 247.84);
  --layout-breadcrumb-border: oklch(0.89 0 0);
}

/* Shadcn UI Dark Theme */
[data-theme-mode="dark"] {
  --background: var(--colors-common-black);
  --foreground: var(--colors-common-white);
  --card: var(--colors-common-black);
  --card-foreground: var(--colors-common-white);
  --popover: var(--colors-common-black);
  --popover-foreground: var(--colors-common-white);
  --primary: var(--colors-palette-primary-default);
  --primary-foreground: var(--colors-palette-primary-darker);
  --secondary: var(--colors-background-neutral);
  --secondary-foreground: var(--colors-palette-gray-500);
  --muted: var(--colors-background-neutral);
  --muted-foreground: var(--colors-palette-gray-400);
  --accent: var(--colors-background-neutral);
  --accent-foreground: var(--colors-palette-gray-500);
  --destructive: var(--colors-palette-error-default);
  --border: rgba(var(--colors-palette-gray-500Channel) / var(--opacity-border));
  --input: rgba(var(--colors-palette-gray-500Channel) / var(--opacity-border));
  --ring: var(--colors-palette-primary-default);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: var(--colors-background-neutral);
  --sidebar-foreground: var(--colors-common-white);
  --sidebar-primary: var(--colors-palette-primary-default);
  --sidebar-primary-foreground: var(--colors-palette-primary-darker);
  --sidebar-accent: var(--colors-background-neutral);
  --sidebar-accent-foreground: var(--colors-common-white);
  --sidebar-border: rgba(
    var(--colors-palette-gray-500Channel) /
    var(--opacity-border)
  );
  --sidebar-ring: var(--colors-palette-primary-default);

  --layout-tabs: oklch(0.2882 0.0062 258.36);
  --layout-tabs-foreground: oklch(0.7068 0.0104 252.84);
  --layout-tabs-primary: oklch(0.3302 0.0077 240.06);
  --layout-tabs-primary-foreground: oklch(0.9629 0.0025 228.78);
  --layout-tabs-border: oklch(0.4189 0.0077 255.53);
  --layout-tabs-accent: oklch(0.9089 0.0075 260.73);
  --layout-tabs-close-accent: oklch(0.4979 0.0094 253.91);
}

@theme inline {
  --color-layout-tabs: var(--layout-tabs);
  --color-layout-tabs-foreground: var(--layout-tabs-foreground);
  --color-layout-tabs-primary: var(--layout-tabs-primary);
  --color-layout-tabs-primary-foreground: var(--layout-tabs-primary-foreground);
  --color-layout-tabs-border: var(--layout-tabs-border);
  --color-layout-tabs-accent: var(--layout-tabs-accent);
  --color-layout-tabs-close-accent: var(--layout-tabs-close-accent);
  --color-layout-breadcrumb: var(--layout-breadcrumb);
  --color-layout-breadcrumb-border: var(--layout-breadcrumb-border);
  --color-layout-breadcrumb-accent: var(--layout-breadcrumb-accent);
}

@layer components {
  .dot-badge {
    @apply aspect-square rounded-md align-middle bg-center bg-no-repeat w-2 h-2 shadow-sm inline-block;
    background-image: radial-gradient(
      circle at 35% 30%,
      oklch(1 0 0 / calc(var(--depth) * 0.5)),
      #0000
    );
  }

  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-y-center {
    @apply flex items-center;
  }

  .flex-col-center {
    @apply flex flex-col items-center justify-center;
  }

  .outline-box {
    @apply outline-border relative cursor-pointer rounded-xl p-1 outline-1;
  }

  .outline-box::after {
    @apply absolute left-1/2 top-1/2 z-20 h-0 w-[1px] rounded-xl opacity-0 outline-2 outline-transparent transition-all duration-300 content-[""];
  }

  .outline-box.outline-box-active {
    @apply outline-primary outline-2;
  }

  .outline-box.outline-box-active::after {
    display: none;
  }

  .outline-box:not(.outline-box-active):hover::after {
    @apply outline-primary left-0 top-0 h-full w-full p-1 opacity-100;
  }

  .no-scrollbar {
    @apply [-ms-overflow-style:none] [scrollbar-width:none];

    &::-webkit-scrollbar {
      @apply hidden;
    }
  }

  .ribbon-breadcrumb {
    border-right: 1.5px solid var(--color-layout-breadcrumb-border);
    clip-path: polygon(
      0 0,
      calc(100% - 10px - 1.5px) 0,
      calc(100% - 1.5px) 50%,
      calc(100% - 10px - 1.5px) 100%,
      0 100%,
      10px 50%
    );
  }

  .ribbon-breadcrumb-first {
    border-right: 1.5px solid var(--color-layout-breadcrumb-border);
    clip-path: polygon(
      0 0,
      calc(100% - 10px - 1.5px) 0,
      calc(100% - 1.5px) 50%,
      calc(100% - 10px - 1.5px) 100%,
      0 100%
    );
  }

  .ribbon-breadcrumb-last {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 10px 50%);
  }

  .parallelogram-breadcrumb {
    clip-path: polygon(8px 0, 100% 0, calc(100% - 8px) 100%, 0 100%);
  }

  .capsule-breadcrumb {
    mask: radial-gradient(
        circle 0.5lh at 0 50%,
        #0000 calc(0.5lh + 0.11em),
        #000 0
      )
      0 0;
  }
}

/* Gray Mode - 灰色模式 */
html.grayscale-mode {
  filter: grayscale(1);
  transition: filter 0.3s ease;
}

/* Color Weak Mode - 色弱模式 */
html.color-weak-mode {
  /* 增强对比度，提高亮度，调整饱和度以帮助色弱用户 */
  filter: contrast(1.2) brightness(1.1) saturate(1.3);
  transition: filter 0.3s ease;
}

/* Combined modes - 组合模式 */
html.grayscale-mode.color-weak-mode {
  filter: grayscale(1) contrast(1.2) brightness(1.1);
  transition: filter 0.3s ease;
}

/* 保留原有的 invert-mode，可能在其他地方使用 */
html.invert-mode {
  @apply invert;
}
